<div class="container mt-5" *ngIf="orders$ | async as orders; else loading">
  <h2 class="mb-4 text-center">📦 Tus órdenes</h2>

  <div *ngIf="orders && orders.length > 0; else emptyOrders">
    <c-card class="mb-3" *ngFor="let order of orders">
      <div class="card-body">
        <h5>Orden: {{ order.orderId }}</h5>
        <p>Dirección: {{ order.address }}</p>
        <p>Estado: {{ order.status }}</p>
        <p>Total: Q{{ order.amount }}</p>
        <ul>
          <li *ngFor="let detail of order.details">
            {{ detail.productName }} - Cantidad: {{ detail.quantity }} - Subtotal: Q{{ detail.subtotal }}
          </li>
        </ul>
      </div>
    </c-card>
  </div>

  <ng-template #emptyOrders>
    <p class="text-center text-muted">No tienes órdenes todavía.</p>
  </ng-template>
</div>

<ng-template #loading>
  <div class="text-center mt-5">
    <div class="spinner-border text-primary" role="status"></div>
    <p class="mt-3 text-muted">Cargando órdenes...</p>
  </div>
</ng-template>
